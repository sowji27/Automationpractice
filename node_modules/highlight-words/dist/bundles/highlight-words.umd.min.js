!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).HighlightWords=r()}(this,(function(){"use strict";var t=function(){return(t=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function r(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),i=0;for(r=0;r<e;r++)for(var o=arguments[r],c=0,a=o.length;c<a;c++,i++)n[i]=o[c];return n}for(var e=36,n="";e--;)n+=e.toString(36);function i(t){void 0===t&&(t=11);for(var r="",e=t;e--;)r+=n[36*Math.random()|0];return r}var o,c=(o="match",function(t){return null!=t&&o in t});function a(t){var e=t.curr,n=t.next,i=t.prev,o=t.clipBy,a=void 0===o?3:o,u=e.text.split(" "),f=u.length;if(e.match||a>=f)return e.text;return c(i)&&c(n)?f>2*a?r(u.slice(0,a),["..."],u.slice(-a)).join(" "):e.text:c(n)?r(["..."],u.slice(-a)).join(" "):c(i)?r(u.slice(0,a),["..."]).join(" "):e.text}var u=function(t){return t.length>0};return function(r){var e=r.text,n=r.query,o=r.clipBy,c=r.matchExactly,f=void 0!==c&&c,l=n.trim();if(""===l)return[{key:i(),text:e,match:!1}];var p=new RegExp(function(t){var r=t.terms,e=t.matchExactly,n=void 0!==e&&e;if("string"!=typeof r)throw new TypeError("Expected a string");var i=r.trim().replace(/[|\\{}()[\]^$+*?.-]/g,(function(t){return"\\"+t}));return"("+(n?i:i.split(" ").join("|"))+")"}({terms:l,matchExactly:f}),"ig");return e.split(p).filter(u).map((function(t){return{key:i(),text:t,match:f?t.toLowerCase()===l.toLowerCase():p.test(t)}})).map((function(r,e,n){return t(t({},r),"number"==typeof o&&{text:a(t(t(t({curr:r},e<n.length-1&&{next:n[e+1]}),e>0&&{prev:n[e-1]}),{clipBy:o}))})}))}}));
